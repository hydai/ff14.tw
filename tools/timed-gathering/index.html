<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="pageTitle">特殊採集時間管理器</title>
    <meta name="description" content="FF14 特殊採集時間管理工具，支援搜尋、多清單管理、巨集匯出功能" data-i18n="pageDescription" data-i18n-attr="content">
    <link rel="icon" type="image/x-icon" href="../../assets/images/ff14tw.ico">
    <link rel="stylesheet" href="../../assets/css/common.css">
    <link rel="stylesheet" href="../../assets/css/dark-mode-tools.css">
    <link rel="stylesheet" href="../../assets/css/tools-common.css">
    <link rel="stylesheet" href="../../assets/css/components/language-switcher.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="header-placeholder" data-base-path="../../" data-tool-name="特殊採集時間管理器" data-tool-name-key="pageTitle"></div>
    <noscript>
        <nav style="padding: 1rem; background: #667eea; color: white; text-align: center;">
            <a href="/" style="color: white; margin: 0 1rem;">首頁</a>
            <a href="/copyright.html" style="color: white; margin: 0 1rem;">版權聲明</a>
            <a href="https://github.com/hydai/ff14.tw" target="_blank" rel="noopener noreferrer" style="color: white; margin: 0 1rem;">GitHub</a>
            <a href="/about.html" style="color: white; margin: 0 1rem;">關於</a>
        </nav>
    </noscript>

    <main class="main">
        <div class="container">
            <h1 class="visually-hidden" data-i18n="pageTitle">特殊採集時間管理器</h1>
            <!-- 時間與通知顯示區域 -->
            <div class="time-display-container">
                <div class="time-display-card">
                    <div class="time-label" data-i18n="localTimeLabel">本地時間 (LT)</div>
                    <div class="time-value" id="localTimeDisplay">--:--:--</div>
                </div>
                <div class="time-display-card">
                    <div class="time-label" data-i18n="eorzeaTimeLabel">艾歐爾傑亞時間 (ET)</div>
                    <div class="time-value-wrapper">
                        <span class="time-value" id="eorzeaTimeDisplay">--:--:--</span>
                        <span class="time-period" id="etPeriod" title="時段"></span>
                    </div>
                </div>
                <!-- 通知設定卡片 -->
                <div class="time-display-card notification-card">
                    <div class="time-label">
                        <span class="notification-icon">🔔</span>
                        <span data-i18n="notificationLabel">採集提醒</span>
                    </div>
                    <div class="notification-compact">
                        <label class="toggle-switch">
                            <input type="checkbox" id="notificationToggle">
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="notification-status-compact" id="notificationStatus" data-i18n="notificationDisabled">通知已停用</span>
                        <button id="testNotificationBtn" class="btn btn-sm btn-secondary" title="測試通知" data-i18n="testNotificationButtonShort" data-i18n-attr="title">
                            🔔
                        </button>
                    </div>
                </div>
            </div>

            <div class="tool-content">
                <!-- 頂部工具列 -->
                <div class="toolbar">
                    <div class="search-section">
                        <input type="text" id="searchInput" class="form-control search-input" placeholder="搜尋採集物名稱、地點..." data-i18n="searchPlaceholder" data-i18n-attr="placeholder">
                        <button id="clearSearchBtn" class="btn btn-secondary btn-sm" data-i18n="clearButton">清除</button>
                    </div>
                    <div class="toolbar-actions">
                        <button id="newListBtn" class="btn btn-primary" data-i18n-html="newListButton">
                            <span class="btn-icon">➕</span> 新增清單
                        </button>
                        <button id="importBtn" class="btn btn-secondary" data-i18n-html="importButton">
                            <span class="btn-icon">📥</span> 匯入
                        </button>
                        <button id="exportBtn" class="btn btn-secondary" data-i18n-html="exportButton">
                            <span class="btn-icon">📤</span> 匯出
                        </button>
                    </div>
                </div>

                <!-- 篩選標籤 -->
                <div class="filter-section">
                    <div class="filter-group">
                        <label class="filter-label" data-i18n="filterType">類型：</label>
                        <div class="filter-tags" id="typeFilters">
                            <button class="tag tag-filter" data-type="mining" data-i18n-html="typeMining">
                                <span class="tag-icon">⛏️</span> 採礦
                            </button>
                            <button class="tag tag-filter" data-type="botany" data-i18n-html="typeBotany">
                                <span class="tag-icon">🌿</span> 園藝
                            </button>
                            <button class="tag tag-filter" data-type="fishing" data-i18n-html="typeFishing">
                                <span class="tag-icon">🎣</span> 釣魚
                            </button>
                        </div>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label" data-i18n="filterVersion">版本：</label>
                        <div class="filter-tags" id="expansionFilters">
                            <button class="tag tag-filter" data-expansion="7.0">v7.0</button>
                            <button class="tag tag-filter" data-expansion="7.1">v7.1</button>
                            <button class="tag tag-filter" data-expansion="7.2">v7.2</button>
                            <button class="tag tag-filter" data-expansion="7.3">v7.3</button>
                        </div>
                    </div>
                </div>

                <!-- 主要內容區 -->
                <div class="main-content">
                    <!-- 左側：採集物列表 -->
                    <div class="items-panel">
                        <div class="panel-header">
                            <h2 data-i18n="itemsListTitle">採集物列表</h2>
                            <span class="item-count" id="itemCount">載入中...</span>
                        </div>

                        <!-- 載入中提示 -->
                        <div class="loading" id="loadingIndicator">
                            <div class="loading-spinner"></div>
                            <p data-i18n="loadingItems">載入採集物資料中...</p>
                        </div>

                        <!-- 錯誤訊息 -->
                        <div class="error-message" id="errorMessage" style="display: none;"></div>

                        <!-- 採集物卡片容器 -->
                        <div class="items-container" id="itemsContainer"></div>
                    </div>

                    <!-- 右側：清單管理 -->
                    <div class="lists-panel">
                        <!-- 清單標籤頁 -->
                        <div class="list-tabs" id="listTabs">
                            <button class="list-tab active" data-list-id="default" data-i18n="defaultListName">預設清單</button>
                        </div>

                        <!-- 清單內容 -->
                        <div class="list-content">
                            <div class="list-header">
                                <h3 id="currentListName" data-i18n="defaultListName">預設清單</h3>
                                <div class="list-actions">
                                    <button id="renameListBtn" class="btn btn-sm" title="重新命名" data-i18n="renameListTooltip" data-i18n-attr="title">✏️</button>
                                    <button id="deleteListBtn" class="btn btn-sm btn-danger" title="刪除清單" data-i18n="deleteListTooltip" data-i18n-attr="title">🗑️</button>
                                    <button id="clearListBtn" class="btn btn-sm" title="清空清單" data-i18n="clearListTooltip" data-i18n-attr="title">🧹</button>
                                </div>
                            </div>

                            <div class="list-items" id="listItems">
                                <div class="empty-list-message">
                                    <p data-i18n="emptyListMessage">清單為空</p>
                                    <small data-i18n="emptyListHint">從左側點擊「加入清單」按鈕來新增採集物</small>
                                </div>
                            </div>

                            <!-- 巨集匯出區 -->
                            <div class="macro-section">
                                <div class="macro-header">
                                    <h3 data-i18n="macroSectionTitle">巨集匯出</h3>
                                    <button id="generateMacroBtn" class="btn btn-success btn-sm" data-i18n-html="generateMacroButton">
                                        <span class="btn-icon">⚙️</span> 生成巨集
                                    </button>
                                </div>
                                <div class="macro-options">
                                    <label class="form-check">
                                        <input type="checkbox" id="includeClearCmd" class="form-check-input" checked>
                                        <span class="form-check-label" data-i18n="includeClearOption">包含清除指令</span>
                                    </label>
                                    <label class="form-check">
                                        <input type="checkbox" id="sortByTime" class="form-check-input" checked>
                                        <span class="form-check-label" data-i18n="sortByTimeOption">按時間排序</span>
                                    </label>
                                </div>
                                <div class="macro-output" id="macroOutput" style="display: none;">
                                    <textarea id="macroText" class="form-control" rows="10" readonly></textarea>
                                    <button id="copyMacroBtn" class="btn btn-primary btn-block" data-i18n-html="copyMacroButton">
                                        <span class="btn-icon">📋</span> 複製到剪貼簿
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="footer-placeholder" data-base-path="../../"></div>

    <!-- 對話框 -->
    <div id="dialogOverlay" class="dialog-overlay" style="display: none;">
        <div class="dialog">
            <div class="dialog-header">
                <h3 id="dialogTitle" data-i18n="dialogTitle">對話框標題</h3>
                <button class="dialog-close" id="dialogClose">&times;</button>
            </div>
            <div class="dialog-body" id="dialogBody">
                <!-- 動態內容 -->
            </div>
            <div class="dialog-footer">
                <button id="dialogCancel" class="btn btn-secondary" data-i18n="cancelButton">取消</button>
                <button id="dialogConfirm" class="btn btn-primary" data-i18n="confirmButton">確認</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="../../assets/js/components/nav-template.js"></script>
    <script src="../../assets/js/components/footer-template.js"></script>
    <script src="../../assets/js/components/layout-loader.js"></script>
    <script src="../../assets/js/common.js"></script>
    <script src="../../assets/js/i18n/i18n-manager.js"></script>
    <script src="../../assets/js/i18n/translations/common.js"></script>
    <script src="../../assets/js/i18n/translations/tools/timed-gathering.js"></script>
    <script src="../../assets/js/security-utils.js"></script>
    <script src="time-calculator.js"></script>
    <script src="list-manager.js"></script>
    <script src="notification-manager.js"></script>
    <script src="macro-exporter.js"></script>
    <script src="search-filter.js"></script>
    <script src="script.js"></script>
</body>
</html>
