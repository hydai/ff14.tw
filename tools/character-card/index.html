<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="pageTitle">角色卡產生器 - FF14.tw</title>
    <meta name="description" content="快速生成你的FF14角色資訊卡片，支援多種樣式和自訂選項。" data-i18n="metaDescription" data-i18n-attr="content">
    <link rel="icon" type="image/x-icon" href="../../assets/images/ff14tw.ico">
    <link rel="stylesheet" href="../../assets/css/common.css">
    <link rel="stylesheet" href="../../assets/css/dark-mode-tools.css">
    <link rel="stylesheet" href="../../assets/css/tools-common.css">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;600;700&family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/language-switcher.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <a href="/" class="logo">FF14.tw</a>
            <nav class="nav">
                <a href="/" data-i18n="nav.home">首頁</a>
                <a href="/copyright.html" data-i18n="nav.copyright">版權聲明</a>
                <a href="https://github.com/hydai/ff14.tw" target="_blank" data-i18n="nav.github">GitHub</a>
                <div class="nav-dropdown">
                    <a href="#" data-i18n="nav.about">關於本站</a>
                    <div class="nav-dropdown-content">
                        <a href="/about.html" data-i18n="nav.aboutPage">關於</a>
                        <a href="/changelog.html" data-i18n="nav.changelog">修改紀錄</a>
                    </div>
                </div>
                <div id="languageSwitcher" class="language-switcher" data-language-switcher data-style="buttons" data-show-native="true"></div>
            </nav>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <section class="hero">
                <h1 data-i18n="title">角色卡產生器</h1>
            </section>

            <div class="tool-container">
                <div class="preview-section">
                    <div id="characterCard" class="character-card theme-default layout-horizontal">
                        <div class="card-background" id="cardBackground">
                            <img id="backgroundImage" class="background-image" style="display: none;">
                        </div>
                        <div class="card-content">
                            <!-- 橫版布局 -->
                            <div class="horizontal-layout">
                                <div class="business-card-layout">
                                    <div class="character-section">
                                        <div class="name-row">
                                            <div class="name-info">
                                                <h2 class="character-name" data-i18n="preview.characterName">角色名稱</h2>
                                                <span class="job-name" data-i18n="preview.job">職業</span>
                                                <div class="info-line">
                                                    <span class="character-title" data-i18n="preview.title">稱號</span>
                                                    <span class="separator">•</span>
                                                    <span class="company-name" data-i18n="preview.freeCompany">---</span>
                                                    <span class="separator">•</span>
                                                    <span class="server-name" data-i18n="preview.server">伺服器</span>
                                                </div>
                                            </div>
                                            <div class="job-icon">⚔️</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 直版布局 -->
                            <div class="vertical-layout" style="display: none;">
                                <div class="business-card-layout">
                                    <div class="character-section">
                                        <div class="name-row">
                                            <div class="name-info">
                                                <h2 class="character-name" data-i18n="preview.characterName">角色名稱</h2>
                                                <span class="job-name" data-i18n="preview.job">職業</span>
                                                <div class="info-line">
                                                    <span class="character-title" data-i18n="preview.title">稱號</span>
                                                    <span class="separator">•</span>
                                                    <span class="company-name" data-i18n="preview.freeCompany">---</span>
                                                    <span class="separator">•</span>
                                                    <span class="server-name" data-i18n="preview.server">伺服器</span>
                                                </div>
                                            </div>
                                            <div class="job-icon">⚔️</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="image-controls">
                    <h3 data-i18n="imageSettings.title">圖片設定</h3>
                    <div class="controls-row">
                        <div class="control-group">
                            <label data-i18n="imageSettings.upload">上傳圖片</label>
                            <input type="file" id="characterImage" accept="image/*" class="file-input">
                            <small class="form-hint" data-i18n="imageSettings.uploadHint">JPG、PNG、GIF</small>
                        </div>
                        <div class="control-group" id="positionGroup" style="display: none;">
                            <label data-i18n="imageSettings.position">位置</label>
                            <div class="position-controls">
                                <button type="button" class="control-btn" id="moveUp">↑</button>
                                <button type="button" class="control-btn" id="moveDown">↓</button>
                                <button type="button" class="control-btn" id="moveLeft">←</button>
                                <button type="button" class="control-btn" id="moveRight">→</button>
                            </div>
                        </div>
                        <div class="control-group" id="scaleGroup" style="display: none;">
                            <label data-i18n="imageSettings.scale">縮放</label>
                            <input type="range" id="scaleSlider" min="0.5" max="2" step="0.1" value="1">
                            <span id="scaleValue">100%</span>
                        </div>
                        <div class="control-group" id="rotateGroup" style="display: none;">
                            <label data-i18n="imageSettings.rotate">旋轉</label>
                            <input type="range" id="rotateSlider" min="0" max="360" step="1" value="0">
                            <span id="rotateValue">0°</span>
                        </div>
                        <div class="control-group" id="opacityGroup" style="display: none;">
                            <label data-i18n="imageSettings.opacity">背景透明度</label>
                            <input type="range" id="opacitySlider" min="0" max="100" step="5" value="40">
                            <span id="opacityValue">40%</span>
                        </div>
                        <div class="control-group" id="actionGroup" style="display: none;">
                            <label data-i18n="imageSettings.actions">操作</label>
                            <div class="action-buttons">
                                <button type="button" class="btn btn-secondary" id="resetImage" data-i18n="imageSettings.reset">重置</button>
                                <button type="button" class="btn btn-secondary" id="removeImage" data-i18n="imageSettings.remove">移除</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="input-section">
                    <div class="form-group">
                        <label for="characterName" data-i18n="form.characterName">角色名稱</label>
                        <input type="text" id="characterName" placeholder="輸入角色名稱" data-i18n="form.characterNamePlaceholder" data-i18n-attr="placeholder">
                    </div>

                    <div class="form-group">
                        <div class="collapsible-header" id="serverCollapsibleHeader">
                            <label data-i18n="form.serverSelection">伺服器選擇</label>
                            <button type="button" class="collapse-toggle" id="serverCollapseToggle">
                                <span class="toggle-icon">▼</span>
                            </button>
                        </div>
                        
                        <!-- 已選擇的伺服器顯示 -->
                        <div class="selected-server" id="selectedServer" style="display: none;">
                            <span class="selected-label" data-i18n="form.selected">已選擇</span>：
                            <span class="selected-value" id="selectedServerName"></span>
                            <button type="button" class="clear-btn" id="clearServer" data-i18n="form.reselect">重新選擇</button>
                        </div>

                        <div class="collapsible-content" id="serverCollapsibleContent">
                            <!-- 第一層：區域選擇 -->
                            <div class="server-selection-step">
                                <div class="selection-grid">
                                    <button type="button" class="selection-btn" data-region="Japan">Japan</button>
                                    <button type="button" class="selection-btn" data-region="Oceanian">Oceanian</button>
                                    <button type="button" class="selection-btn" data-region="Europe">Europe</button>
                                    <button type="button" class="selection-btn" data-region="North America">North America</button>
                                    <button type="button" class="selection-btn" data-region="Taiwan">Taiwan</button>
                                </div>
                            </div>

                            <!-- 第二層：資料中心選擇 -->
                            <div class="server-selection-step" id="datacenterStep" style="display: none;">
                                <div class="selection-grid" id="datacenterGrid">
                                    <!-- 動態生成 -->
                                </div>
                            </div>

                            <!-- 第三層：伺服器選擇 -->
                            <div class="server-selection-step" id="serverStep" style="display: none;">
                                <div class="selection-grid" id="serverGrid">
                                    <!-- 動態生成 -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- 隱藏的input用於表單提交 -->
                        <input type="hidden" id="serverName" name="serverName" value="">
                    </div>

                    <div class="form-group">
                        <div class="collapsible-header" id="jobCollapsibleHeader">
                            <label data-i18n="form.jobSelection">職業選擇</label>
                            <button type="button" class="collapse-toggle" id="jobCollapseToggle">
                                <span class="toggle-icon">▼</span>
                            </button>
                        </div>
                        
                        <!-- 已選擇的職業顯示 -->
                        <div class="selected-server" id="selectedJob" style="display: none;">
                            <span class="selected-label" data-i18n="form.selectedJob">已選擇職業</span>：
                            <span class="selected-value" id="selectedJobName"></span>
                            <button type="button" class="clear-btn" id="clearJob" data-i18n="form.reselect">重新選擇</button>
                        </div>

                        <div class="collapsible-content" id="jobCollapsibleContent">
                            <!-- 坦克職業 -->
                            <div class="job-category">
                                <h4 class="job-category-title">
                                    <span class="job-category-icon">🛡️</span>
                                    <span data-i18n="jobs.categories.tank">坦克</span>
                                </h4>
                                <div class="selection-grid">
                                    <button type="button" class="selection-btn job-btn" data-job="paladin" data-category="tank" data-i18n="jobs.names.paladin">騎士</button>
                                    <button type="button" class="selection-btn job-btn" data-job="warrior" data-category="tank" data-i18n="jobs.names.warrior">戰士</button>
                                    <button type="button" class="selection-btn job-btn" data-job="darkKnight" data-category="tank" data-i18n="jobs.names.darkKnight">暗黑騎士</button>
                                    <button type="button" class="selection-btn job-btn" data-job="gunbreaker" data-category="tank" data-i18n="jobs.names.gunbreaker">絕槍戰士</button>
                                </div>
                            </div>

                            <!-- 治療職業 -->
                            <div class="job-category">
                                <h4 class="job-category-title">
                                    <span class="job-category-icon">💚</span>
                                    <span data-i18n="jobs.categories.healer">治療</span>
                                </h4>
                                <div class="selection-grid">
                                    <button type="button" class="selection-btn job-btn" data-job="whiteMage" data-category="healer" data-i18n="jobs.names.whiteMage">白魔法師</button>
                                    <button type="button" class="selection-btn job-btn" data-job="scholar" data-category="healer" data-i18n="jobs.names.scholar">學者</button>
                                    <button type="button" class="selection-btn job-btn" data-job="astrologian" data-category="healer" data-i18n="jobs.names.astrologian">占星術士</button>
                                    <button type="button" class="selection-btn job-btn" data-job="sage" data-category="healer" data-i18n="jobs.names.sage">賢者</button>
                                </div>
                            </div>

                            <!-- 近戰職業 -->
                            <div class="job-category">
                                <h4 class="job-category-title">
                                    <span class="job-category-icon">⚔️</span>
                                    <span data-i18n="jobs.categories.melee">近戰</span>
                                </h4>
                                <div class="selection-grid">
                                    <button type="button" class="selection-btn job-btn" data-job="monk" data-category="melee" data-i18n="jobs.names.monk">武僧</button>
                                    <button type="button" class="selection-btn job-btn" data-job="dragoon" data-category="melee" data-i18n="jobs.names.dragoon">龍騎士</button>
                                    <button type="button" class="selection-btn job-btn" data-job="ninja" data-category="melee" data-i18n="jobs.names.ninja">忍者</button>
                                    <button type="button" class="selection-btn job-btn" data-job="samurai" data-category="melee" data-i18n="jobs.names.samurai">武士</button>
                                    <button type="button" class="selection-btn job-btn" data-job="reaper" data-category="melee" data-i18n="jobs.names.reaper">鐮刀</button>
                                </div>
                            </div>

                            <!-- 遠程職業 -->
                            <div class="job-category">
                                <h4 class="job-category-title">
                                    <span class="job-category-icon">🏹</span>
                                    <span data-i18n="jobs.categories.ranged">遠程</span>
                                </h4>
                                <div class="selection-grid">
                                    <button type="button" class="selection-btn job-btn" data-job="bard" data-category="ranged" data-i18n="jobs.names.bard">詩人</button>
                                    <button type="button" class="selection-btn job-btn" data-job="machinist" data-category="ranged" data-i18n="jobs.names.machinist">機工士</button>
                                    <button type="button" class="selection-btn job-btn" data-job="dancer" data-category="ranged" data-i18n="jobs.names.dancer">舞者</button>
                                </div>
                            </div>

                            <!-- 魔法職業 -->
                            <div class="job-category">
                                <h4 class="job-category-title">
                                    <span class="job-category-icon">🔮</span>
                                    <span data-i18n="jobs.categories.magic">魔法</span>
                                </h4>
                                <div class="selection-grid">
                                    <button type="button" class="selection-btn job-btn" data-job="blackMage" data-category="magic" data-i18n="jobs.names.blackMage">黑魔法師</button>
                                    <button type="button" class="selection-btn job-btn" data-job="summoner" data-category="magic" data-i18n="jobs.names.summoner">召喚師</button>
                                    <button type="button" class="selection-btn job-btn" data-job="redMage" data-category="magic" data-i18n="jobs.names.redMage">赤魔法師</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 隐藏的input用於表單提交 -->
                        <input type="hidden" id="jobName" name="jobName" value="">
                    </div>


                    <div class="form-group">
                        <label for="characterTitle" data-i18n="form.characterTitle">稱號</label>
                        <input type="text" id="characterTitle" placeholder="角色稱號（可選）" data-i18n="form.characterTitlePlaceholder" data-i18n-attr="placeholder">
                    </div>

                    <div class="form-group">
                        <label for="freeCompany" data-i18n="form.freeCompany">部隊名稱</label>
                        <input type="text" id="freeCompany" placeholder="部隊名稱（可選）" data-i18n="form.freeCompanyPlaceholder" data-i18n-attr="placeholder">
                    </div>

                    <div class="form-group">
                        <label for="cardLayout" data-i18n="form.cardLayout">卡片版型</label>
                        <select id="cardLayout">
                            <option value="horizontal" data-i18n="form.layoutHorizontal">橫版 (800x600)</option>
                            <option value="vertical" data-i18n="form.layoutVertical">直版 (600x800)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="nameColor" data-i18n="form.nameColor">角色名稱顏色</label>
                        <div class="color-input-wrapper">
                            <input type="color" id="nameColor" value="#FFFFFF">
                            <input type="text" id="nameColorText" value="#FFFFFF" placeholder="#FFFFFF">
                        </div>
                    </div>


                    <div class="button-group">
                        <button id="generateCard" class="btn" data-i18n="buttons.generate">產生角色卡</button>
                        <button id="downloadCard" class="btn btn-secondary" data-i18n="buttons.download">下載圖片</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>
                <span data-i18n="footer.copyright">&copy; 2024-2025 FF14.tw</span> | 
                <span data-i18n="footer.disclaimer">本站非官方網站，與 Square Enix 無關</span> | 
                <span data-i18n="footer.madeWith">Made with ❤️ by hydai</span>
            </p>
        </div>
    </footer>

    <script src="../../assets/js/common.js"></script>
    <script src="../../assets/js/security-utils.js"></script>
    <script src="../../assets/js/i18n.js"></script>
    <script src="../../assets/js/components/language-switcher.js"></script>
    <script src="script.js"></script>
    <script>
        // Initialize i18n
        document.addEventListener('DOMContentLoaded', async () => {
            // Load translations
            await i18n.init(['common', 'tools/character-card']);
            
            // Language switcher is auto-initialized by its script.
            
            // Reinitialize with i18n if needed
            if (window.characterCardGenerator) {
                window.characterCardGenerator.updateMessages();
            }
        });
    </script>
</body>
</html>